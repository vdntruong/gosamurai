# Official Go Tools (golang.org/x/tools/cmd)

A comprehensive reference for official Go tools from the [golang.org/x/tools/cmd](https://pkg.go.dev/golang.org/x/tools/cmd) package.

## Code Formatting & Import Management

### goimports
**Package:** `golang.org/x/tools/cmd/goimports`

Updates your Go import lines, adding missing ones and removing unreferenced ones. Also formats code in the same style as `gofmt`, making it a complete replacement for editor format-on-save hooks.

```bash
go install golang.org/x/tools/cmd/goimports@latest
```

**Features:**
- Automatically adds missing imports
- Removes unreferenced imports
- Formats code (gofmt-compatible)
- Respects `.goimportsignore` file in `$GOPATH/src/`

**Usage:**
```bash
goimports -w .           # Format and fix imports in current directory
goimports -l .           # List files that need formatting
goimports -d file.go     # Show diff without modifying
```

### fiximports
**Package:** `golang.org/x/tools/cmd/fiximports`

Fixes import declarations to use canonical import paths.

```bash
go install golang.org/x/tools/cmd/fiximports@latest
```

## Code Generation

### stringer
**Package:** `golang.org/x/tools/cmd/stringer`

Automates creation of `String()` methods for integer-based types (enums). Perfect for use with `go generate`.

```bash
go install golang.org/x/tools/cmd/stringer@latest
```

**Example:**
```go
//go:generate stringer -type=Pill
type Pill int

const (
    Placebo Pill = iota
    Aspirin
    Ibuprofen
    Paracetamol
)
```

**Usage:**
```bash
stringer -type=Pill                   # Generate for Pill type
stringer -type=Pill,Drug              # Multiple types
stringer -type=Pill -output=custom.go # Custom output file
stringer -trimprefix=Pill -type=Pill  # Remove prefix from strings
stringer -linecomment -type=Pill      # Use line comments as strings
```

## Code Analysis & Navigation

### callgraph
**Package:** `golang.org/x/tools/cmd/callgraph`

Reports the call graph of a Go program, showing which functions call which.

```bash
go install golang.org/x/tools/cmd/callgraph@latest
```

**Usage:**
```bash
callgraph -algo=static -format=graphviz main.go | dot -Tpng -o callgraph.png
```

### deadcode
**Package:** `golang.org/x/tools/cmd/deadcode`

Reports unreachable functions in Go programs using Rapid Type Analysis (RTA).

```bash
go install golang.org/x/tools/cmd/deadcode@latest
```

**Features:**
- Finds dead code using call graph analysis
- Supports test executables with `-test` flag
- Can filter results by package with `-filter` regex
- Excludes generated files by default (use `-generated` to include)
- JSON output support with `-json` flag

**Usage:**
```bash
deadcode ./...                         # Analyze current package
deadcode -test ./...                   # Include test code
deadcode -filter='mymodule' ./...     # Filter to specific packages
deadcode -json ./...                   # JSON output
```

### guru
**Package:** `golang.org/x/tools/cmd/guru`

A tool for answering questions about Go source code. Provides deep code analysis and navigation.

```bash
go install golang.org/x/tools/cmd/guru@latest
```

**Capabilities:**
- Find callers/callees of a function
- Find implements of an interface
- Show type information
- Find all references to an object
- Show control flow graph
- Point-to analysis

**Documentation:** [http://golang.org/s/using-guru](http://golang.org/s/using-guru)

### godex
**Package:** `golang.org/x/tools/cmd/godex`

Extracts and displays exported entities from Go packages, similar to `go doc` but with more detail.

```bash
go install golang.org/x/tools/cmd/godex@latest
```

### gotype
**Package:** `golang.org/x/tools/cmd/gotype`

A type checker for Go source code that verifies syntactic and semantic correctness.

```bash
go install golang.org/x/tools/cmd/gotype@latest
```

## Refactoring Tools

### gorename
**Package:** `golang.org/x/tools/cmd/gorename`

Performs precise, type-safe renaming of identifiers across an entire Go workspace.

```bash
go install golang.org/x/tools/cmd/gorename@latest
```

**Usage:**
```bash
gorename -from '"mypackage".OldName' -to NewName
```

### gomvpkg
**Package:** `golang.org/x/tools/cmd/gomvpkg`

Moves Go packages, updating all imports automatically.

```bash
go install golang.org/x/tools/cmd/gomvpkg@latest
```

**Usage:**
```bash
gomvpkg -from old/package/path -to new/package/path
```

### eg
**Package:** `golang.org/x/tools/cmd/eg`

Example-based refactoring tool. Applies transformations based on template examples.

```bash
go install golang.org/x/tools/cmd/eg@latest
```

## Code Coverage

### cover
**Package:** `golang.org/x/tools/cmd/cover`

Tool for analyzing code coverage profiles generated by `go test -cover`.

```bash
go install golang.org/x/tools/cmd/cover@latest
```

**Usage:**
```bash
go test -coverprofile=coverage.out
go tool cover -html=coverage.out        # View in browser
go tool cover -func=coverage.out        # Show coverage per function
```

## Benchmarking & Testing

### benchcmp
**Package:** `golang.org/x/tools/cmd/benchcmp`

Compares benchmark results from `go test -bench`.

```bash
go install golang.org/x/tools/cmd/benchcmp@latest
```

**Usage:**
```bash
go test -bench=. > old.txt
# Make changes
go test -bench=. > new.txt
benchcmp old.txt new.txt
```

### compilebench
**Package:** `golang.org/x/tools/cmd/compilebench`

Benchmarks the Go compiler's performance.

```bash
go install golang.org/x/tools/cmd/compilebench@latest
```

### stress
**Package:** `golang.org/x/tools/cmd/stress`

Runs tests repeatedly to identify flaky tests.

```bash
go install golang.org/x/tools/cmd/stress@latest
```

**Usage:**
```bash
stress go test -race ./...
```

## Fuzzing Tools

### file2fuzz
**Package:** `golang.org/x/tools/cmd/file2fuzz`

Converts files into corpus entries for Go fuzzing tests.

```bash
go install golang.org/x/tools/cmd/file2fuzz@latest
```

## Utilities

### digraph
**Package:** `golang.org/x/tools/cmd/digraph`

Performs queries over directed graphs expressed in text format. Useful for analyzing dependency graphs.

```bash
go install golang.org/x/tools/cmd/digraph@latest
```

**Usage:**
```bash
go mod graph | digraph somepath golang.org/x/tools github.com/example/pkg
```

### bisect
**Package:** `golang.org/x/tools/cmd/bisect`

Binary search tool for debugging. Helps identify which change introduced a bug.

```bash
go install golang.org/x/tools/cmd/bisect@latest
```

### bundle
**Package:** `golang.org/x/tools/cmd/bundle`

Bundles multiple Go source files into a single file, useful for creating self-contained packages.

```bash
go install golang.org/x/tools/cmd/bundle@latest
```

### gonew
**Package:** `golang.org/x/tools/cmd/gonew`

Creates new Go projects from templates.

```bash
go install golang.org/x/tools/cmd/gonew@latest
```

**Usage:**
```bash
gonew example.com/template/path new/project/path
```

### toolstash
**Package:** `golang.org/x/tools/cmd/toolstash`

Saves and restores copies of Go toolchain binaries, useful for compiler development.

```bash
go install golang.org/x/tools/cmd/toolstash@latest
```

## Documentation & Presentation

### godoc
**Package:** `golang.org/x/tools/cmd/godoc`

Extracts and generates documentation from Go source code. Runs a local documentation server.

```bash
go install golang.org/x/tools/cmd/godoc@latest
```

**Usage:**
```bash
godoc -http=:6060    # Start documentation server
```

### present
**Package:** `golang.org/x/tools/cmd/present`

Tool for creating and displaying slide presentations written in Go's present format.

```bash
go install golang.org/x/tools/cmd/present@latest
```

### present2md
**Package:** `golang.org/x/tools/cmd/present2md`

Converts present-formatted slides to Markdown.

```bash
go install golang.org/x/tools/cmd/present2md@latest
```

### html2article
**Package:** `golang.org/x/tools/cmd/html2article`

Converts HTML to Go article format.

```bash
go install golang.org/x/tools/cmd/html2article@latest
```

## Debugging & Low-Level Tools

### ssadump
**Package:** `golang.org/x/tools/cmd/ssadump`

Dumps the SSA (Static Single Assignment) representation of Go programs. Useful for compiler research and optimization analysis.

```bash
go install golang.org/x/tools/cmd/ssadump@latest
```

### splitdwarf
**Package:** `golang.org/x/tools/cmd/splitdwarf`

Splits DWARF debug information from Go binaries.

```bash
go install golang.org/x/tools/cmd/splitdwarf@latest
```

### goyacc
**Package:** `golang.org/x/tools/cmd/goyacc`

Go version of yacc - generates parsers from grammar specifications.

```bash
go install golang.org/x/tools/cmd/goyacc@latest
```

## Authentication

### auth
**Package:** `golang.org/x/tools/cmd/auth`

Authentication helper for Go tools.

```bash
go install golang.org/x/tools/cmd/auth@latest
```

## Installation

Install any of these tools using:

```bash
go install golang.org/x/tools/cmd/<tool-name>@latest
```

To install all commonly used tools:

```bash
go install golang.org/x/tools/cmd/goimports@latest
go install golang.org/x/tools/cmd/stringer@latest
go install golang.org/x/tools/cmd/deadcode@latest
go install golang.org/x/tools/cmd/callgraph@latest
go install golang.org/x/tools/cmd/gorename@latest
```

## Tracking Tools in Your Project

Create a `tools.go` file to track tool dependencies:

```go
//go:build tools
// +build tools

package tools

import (
    _ "golang.org/x/tools/cmd/goimports"
    _ "golang.org/x/tools/cmd/stringer"
    _ "golang.org/x/tools/cmd/deadcode"
)
```

Then run:
```bash
go mod tidy
```

This ensures all developers have the same tool versions.

## Tool Version Management (Go 1.24+)

Go 1.24 introduces a new **tool directive** in `go.mod` for managing development tool dependencies. This eliminates the need for the `tools.go` workaround and provides official, first-class support for tracking tool versions.

### The Tool Directive

The tool directive allows you to explicitly declare tool dependencies in your `go.mod` file, separate from your application's runtime dependencies.

**Benefits:**
- **Version Consistency**: Lock specific tool versions across your team
- **Clean Separation**: Distinguish development tools from runtime dependencies
- **Automatic Management**: Go tooling installs and manages tools based on the directive
- **Performance**: Tool executables are cached for faster repeated execution

### Adding Tools with `go get -tool`

Add a tool to your project using the `-tool` flag:

```bash
# Add a specific version
go get -tool golang.org/x/tools/cmd/goimports@latest

# Add with explicit version
go get -tool github.com/golangci/golangci-lint/cmd/golangci-lint@v1.55.0

# Add multiple tools
go get -tool golang.org/x/tools/cmd/stringer@latest
go get -tool honnef.co/go/tools/cmd/staticcheck@latest
```

This adds a `tool` directive to your `go.mod`:

```go
module github.com/example/myproject

go 1.24

tool (
    golang.org/x/tools/cmd/goimports
    golang.org/x/tools/cmd/stringer
    honnef.co/go/tools/cmd/staticcheck
)
```

### Running Tools with `go tool`

Execute tools declared in your module:

```bash
# Run a tool by name
go tool goimports -w .
go tool staticcheck ./...

# Run using full import path
go tool golang.org/x/tools/cmd/goimports -w .

# Print tool path
go tool -n goimports

# List all available tools
go tool
```

### Tool Management Commands

#### Install All Tools
Install all tools from `go.mod` into your `GOBIN`:

```bash
go install tool
```

This is equivalent to manually running `go install` for each tool listed in your `go.mod`.

#### Upgrade All Tools
Update all tools to their latest versions:

```bash
go get tool
```

#### List Tools
View all tools declared in your module:

```bash
go list tool
```

#### Remove a Tool
Remove a tool from `go.mod`:

```bash
go get -tool package@none
```

Example:
```bash
go get -tool golang.org/x/tools/cmd/goimports@none
```

### Using Alternative go.mod for Tools

You can isolate tool dependencies in a separate module file using the `-modfile` flag:

```bash
# Run tool with alternative go.mod
go tool -modfile tools/go.mod goimports -w .

# Add tool to alternative go.mod
go get -modfile tools/go.mod -tool golang.org/x/tools/cmd/goimports@latest
```

### Integration with Other Commands

#### Verify Tool Dependencies
Verify the integrity of tool dependencies:

```bash
go mod verify
```

#### Vendor Tool Dependencies
Include tool code in your vendor directory:

```bash
go mod vendor
```

### Migration from tools.go Pattern

**Before Go 1.24** (using `tools.go`):
```go
//go:build tools
// +build tools

package tools

import (
    _ "golang.org/x/tools/cmd/goimports"
    _ "golang.org/x/tools/cmd/stringer"
)
```

**Go 1.24+** (using tool directive):
```bash
# Add tools
go get -tool golang.org/x/tools/cmd/goimports@latest
go get -tool golang.org/x/tools/cmd/stringer@latest

# Remove tools.go file (no longer needed)
rm tools.go
```

Your `go.mod` will now contain:
```go
tool (
    golang.org/x/tools/cmd/goimports
    golang.org/x/tools/cmd/stringer
)
```

### Common Tool Management Workflow

```bash
# 1. Add tools to your project
go get -tool golang.org/x/tools/cmd/goimports@latest
go get -tool golang.org/x/tools/cmd/stringer@latest
go get -tool honnef.co/go/tools/cmd/staticcheck@latest

# 2. Install tools for local use
go install tool

# 3. Run tools
go tool goimports -w .
go tool stringer -type=Status
go tool staticcheck ./...

# 4. Update all tools (periodically)
go get tool

# 5. Share via version control
git add go.mod go.sum
git commit -m "Add development tools"
```

### Best Practices

1. **Version Lock**: Always specify versions for tools to ensure reproducible builds
2. **Team Consistency**: Commit `go.mod` and `go.sum` to version control
3. **CI/CD Integration**: Use `go install tool` in CI pipelines to install required tools
4. **Tool Naming**: Prefer using short names when running tools (`go tool goimports` vs full path)
5. **Regular Updates**: Periodically run `go get tool` to keep tools up to date

### Limitations

- This feature works only with Go-based tools (not Python, Node.js, etc.)
- First execution may be slower as the tool needs to be compiled
- Tools are still declared in the main `go.mod` (though separate from runtime dependencies)

## Resources

- [Official Tools Documentation](https://pkg.go.dev/golang.org/x/tools/cmd)
- [Go Tools Repository](https://github.com/golang/tools)
- [Using Guru](http://golang.org/s/using-guru)
- [Go Modules Reference](https://go.dev/ref/mod)
